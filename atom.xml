<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://gty215615.github.io</id>
    <title>guoTYçš„åšå®¢</title>
    <updated>2022-08-28T10:02:03.288Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://gty215615.github.io"/>
    <link rel="self" href="https://gty215615.github.io/atom.xml"/>
    <subtitle>åˆ†äº«ä»£ç ,è®°å½•å­¦ä¹ è¿‡ç¨‹</subtitle>
    <logo>https://gty215615.github.io/images/avatar.png</logo>
    <icon>https://gty215615.github.io/favicon.ico</icon>
    <rights>All rights reserved 2022, guoTYçš„åšå®¢</rights>
    <entry>
        <title type="html"><![CDATA[2d å›¾å½¢åº“å¼€å‘(ä¸€)]]></title>
        <id>https://gty215615.github.io/post/2d-tu-xing-ku-kai-fa-yi/</id>
        <link href="https://gty215615.github.io/post/2d-tu-xing-ku-kai-fa-yi/">
        </link>
        <updated>2022-08-27T11:15:00.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>2d å‡ ä½•å›¾å½¢éƒ½æ˜¯ç”±ä¸åŒè·¯å¾„ç»„æˆ, å› æ­¤è¦ç»˜åˆ¶å‡º2d å‡ ä½•å›¾å½¢.è¦å…ˆä»ç»˜åˆ¶è·¯å¾„å¼€å§‹ ,è€ƒè™‘åˆ°è·¯å¾„çš„å®½åº¦çš„é—®é¢˜, å¯ä»¥ä½¿ç”¨ä¸‰è§’å½¢æ¥æ¨¡æ‹Ÿçº¿æ®µç»„æˆçš„è·¯å¾„,åŒæ—¶åˆ©ç”¨æ¸²æŸ“ç®¡çº¿çš„ triangle-list æ¨¡å¼æ¥å‡å°‘é‡å¤é¡¶ç‚¹çš„æ•°é‡æå‡æ¸²æŸ“æ•ˆç‡.</p>
</blockquote>
<p><strong>åœ¨ç»˜åˆ¶è·¯å¾„ä¹‹å‰å…ˆè§„å®šä¸€ä¸‹è·¯å¾„ç»˜åˆ¶è¿‡ç¨‹ä¸­çš„è§„åˆ™</strong><br>
1. è·¯å¾„ç”±æ— æ•°æ¡çº¿æ®µç»„æˆ, ä¸€æ¡çº¿æ®µç”±ä¸¤ä¸ªç‚¹ç»„æˆ, ç‚¹æ˜¯è·¯å¾„ç»„æˆçš„æœ€å°å•å…ƒ<br>
2. ç‚¹å…·æœ‰ä½ç½®å±æ€§, åŒæ—¶ç”±äºè¦æ¨¡æ‹Ÿçº¿æ®µçš„å®½åº¦,æ‰€ä»¥æˆ‘ä»¬è¦æ¨¡æ‹Ÿå‡ºè¿™ç§å®½çŸ­,åœ¨æ²¿ç€çº¿æ®µé¦–å°¾ä¸¤ç‚¹ç»„æˆçš„å‘é‡çš„æ³•å‘æ­£æ–¹å‘ä¸æ³•å‘è´Ÿæ–¹å‘åŒæ—¶å»¶ä¼¸å½¢æˆçº¿æ®µçš„å®½.å› æ­¤ç‚¹è¿˜è¦å­˜å‚¨å…¶æ³•å‘æ•°æ®</p>
<pre><code class="language-rust">pub struct PathPoint {
    pub pos:    Vector2f,
    pub normal: Vector2f
}
</code></pre>
<h3 id="çº¿æ®µ">çº¿æ®µ</h3>
<p>å…ˆä»æœ€ç®€å•çš„çº¿æ®µå…¥æ‰‹, è®¾ç½®ä¸¤ä¸ªç‚¹ç»„æˆä¸€æ¡çº¿æ®µ,è®¡ç®—ç»„æˆçº¿æ®µçš„ä¸¤ä¸ªç‚¹çš„æ³•çº¿æ–¹å‘, å¦‚ä¸‹å›¾<br>
<img src="https://gty215615.github.io/post-images/1661601885899.png" alt="" loading="lazy"><br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><msub><mi>P</mi><mn>0</mn></msub><msub><mi>P</mi><mn>1</mn></msub></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding="application/x-tex">\vec{P_0P_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1163299999999998em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span> ä¸ºå‘é‡æ–¹å‘ , åˆ™å‘é‡æ³•å‘ä¸º å‚ç›´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><msub><mi>P</mi><mn>0</mn></msub><msub><mi>P</mi><mn>1</mn></msub></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding="application/x-tex">\vec{P_0P_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1163299999999998em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><msub><mi>P</mi><mn>0</mn></msub><mi>A</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding="application/x-tex">\vec{P_0A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1163299999999998em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">A</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span>å› æ­¤çº¿æ®µçš„å®½åº¦å¯ä»¥ç”± <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><msub><mi>P</mi><mn>0</mn></msub><msub><mi>P</mi><mn>1</mn></msub></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding="application/x-tex">\vec{P_0P_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1163299999999998em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9663299999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span> å‘å…¶æ³•çº¿ä¸¤ä¾§å»¶ä¼¸</p>
<pre><code class="language-rust">// ...
pub fn stroke_line(points:&amp;[PathPoint] , stroke:Stroke ,  out:&amp;mut Mesh){
    let w = stroke.width * 0.5;
    let idx = out.vertices.len() as u16;
    out.color_triangle(points[0].pos + points[0].normal * w, Color::WHITE);
    out.color_triangle(points[0].pos - points[0].normal * w, Color::WHITE);

    out.color_triangle(points[1].pos + points[1].normal * w, Color::WHITE);
    out.color_triangle(points[1].pos - points[1].normal * w, Color::WHITE);

    out.add_triangle(idx + 0, idx + 2, idx + 3);
    out.add_triangle(idx + 0, idx + 1, idx + 3);
}
// ...
</code></pre>
<p>å…¶æ³•å‘çš„è®¡ç®—ä¹Ÿå¾ˆç®€å•,è®¡ç®—å‡ºçº¿æ®µçš„æ–¹å‘å‘é‡ä¹‹å,å¯¹æ­¤æ­¤å‘é‡è¿›è¡Œå•ä½åŒ–,å†å°†å…¶æ—‹è½¬ 90åº¦å³å¯æ±‚å¾—å…¶æ³•å‘æ–¹å‘.</p>
<pre><code class="language-rust">pub fn add_line_segment(&amp;mut self , pos:[Vector2f;2]) {
    // è·å–åˆ°çº¿æ®µæ³•å‘é‡
    let normal = (pos[1] - pos[0]).normalize().rot_90();

    self.add_point(pos[0], normal);
    self.add_point(pos[1], normal);
}
</code></pre>
<p>é‡‡ç”¨æ­¤æ–¹æ³•ç»˜åˆ¶ç›´çº¿çš„ç¼ºç‚¹å°±æ˜¯ä¼šå¯¼è‡´é¡¶ç‚¹æ•°å¢åŠ , å¯¹äºä¸€æ¡çº¿æ®µæ¥è¯´å…¶é¡¶ç‚¹ç”± 2 ä¸ªæ‹“å±•ä¸º 4 ä¸ª. ç»˜åˆ¶ç»“æœ<img src="https://gty215615.github.io/post-images/1661603106078.png" alt="" loading="lazy"></p>
<h3 id="æŠ˜è§’ç»˜åˆ¶">æŠ˜è§’ç»˜åˆ¶</h3>
<p>å¯¹äºä¸¤æ¡çº¿æ®µè¿æ¥å¤„çš„ç»˜åˆ¶å¦‚æœä¸åšå¤„ç†çš„è¯å°±ä¼šå‡ºç°<br>
<img src="https://gty215615.github.io/post-images/1661605469837.png" alt="" loading="lazy"> è¿™ç§æƒ…å†µ,ä¸ºäº†ä½¿å¾—ä¸¤æ¡çº¿æ®µè¿æ¥å¤„æ˜¾å¾—æ›´åŠ çš„å¹³æ»‘,éœ€è¦å¯¹æŠ˜è§’å¤„è¿›è¡Œå¤„ç†<br>
é¦–å…ˆæ‰¾åˆ°ä¸¤æ¡çº¿æ®µçš„å•ä½æ³•å‘å‘é‡ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>j</mi><mi>d</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding="application/x-tex">\vec{jd}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1718799999999998em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9774399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord mathdefault">d</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span> ã€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>j</mi><mi>f</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding="application/x-tex">\vec{jf}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1718799999999998em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9774399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span> ,é€šè¿‡å¹³è¡Œå››è¾¹å½¢æ³•åˆ™è®¡ç®—å¾—å‡ºä¸¤çº¿æ®µæŠ˜è§’å¹³åˆ†çº¿æ–¹å‘ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>j</mi><mi>m</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding="application/x-tex">\vec{jm}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.13696em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.94252em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord mathdefault">m</span></span></span><span style="top:-3.22852em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span> , æ­¤ä¸º 2 ä¸ªå•ä½å®½åº¦çš„æ³•å‘é‡é•¿åº¦ , å› æ­¤è¦è·å¾—æŠ˜è§’å¹³åˆ†çº¿åœ¨ å•ä½å®½åº¦çš„é•¿åº¦æ—¶è¿˜è¦å°†å…¶é™¤ä»¥ 2.0 , ä» j ç‚¹å‡ºå‘, æ²¿ç€æ­¤æ–¹å‘åŠå…¶è´Ÿæ–¹å‘å„ å»¶ä¼¸å‡ºä¸€ä¸ªé¡¶ç‚¹,ä½œä¸ºæŠ˜è§’ç‚¹, æœ€ç»ˆè¿æ¥å»¶ä¼¸å‡ºæ¥çš„ 6 ä¸ªé¡¶ç‚¹æ„å»ºå‡º 4 ä¸ªæ–°çš„ä¸‰è§’å½¢æ¥å®ç°å¯¹çº¿æ®µè¿æ¥æŠ˜è§’çš„å¤„ç†<br>
<img src="https://gty215615.github.io/post-images/1661606524799.png" alt="" loading="lazy"></p>
<p>ä»£ç å®ç°</p>
<pre><code class="language-rust">pub fn add_line_opened(&amp;mut self , positions:Vec&lt;Vector2f&gt;) {
        let n = positions.len();
        self.reserve(n);
        // ç”±äºç›®å‰ä¸è€ƒè™‘è·¯å¾„é—­åˆçš„æƒ…å½¢ å› æ­¤ ç¬¬ä¸€ä¸ªç‚¹ä¸æœ€åä¸€ä¸ªç‚¹è¦å•ç‹¬ç®—
        let mut n0 = (positions[1] - positions[0]).normalize().rot_90();
        self.add_point(positions[0], n0);
        for i in 1..n - 1 {
            let mut n1 = (positions[i + 1] - positions[i]).normalize().rot_90();
            if n0 == Vector2f::ZERO {
                n0 = n1;
            }else if n1 == Vector2f::ZERO {
                n1 = n0;
            }
            let normal = ((n0 + n1) / 2.0).normalize();
            self.add_point(positions[i], normal);
            n0 = n1;
        }

        // è®¡ç®—æœ€åä¸€ä¸ªç‚¹
        self.add_point(positions[n - 1], (positions[n - 1] - positions[ n - 2]).normalize().rot_90());
}

// ç”Ÿæˆé¡¶ç‚¹æ•°æ®

pub fn stroke_path(points:&amp;[PathPoint] , stroke:Stroke ,  out:&amp;mut Mesh ) {

    let w = stroke.width * 0.5;
    let idx = out.vertices.len() as u16;
    let n = points.len();
    out.reserve_vertex( n * 2);
    out.reserve_index(n * 2);

    let step = 2_u16;
    for i in 0..n {
        let is_connect_prev_point = if i &gt; 0 { true } else { false };
        out.color_triangle(points[i].pos + points[i].normal * w, Color::WHITE);
        out.color_triangle(points[i].pos - points[i].normal * w, Color::WHITE);
        if is_connect_prev_point {
            let i = (i - 1) as u16;
            //
            // [ 0 , 1 , 3 ]
            // [ 0 , 2 , 3 ]
            // [ 2,  3,  5 ]
            // [ 2 , 4 , 5 ]
            out.add_triangle(idx + i * step + 0, idx + i * step + 1, idx + i * step + 3);
            out.add_triangle(idx + i * step + 0, idx + i * step + 2, idx + i * step + 3);
        }
    }

}
</code></pre>
<p>æœ€ç»ˆæ•ˆæœ:<br>
<img src="https://gty215615.github.io/post-images/1661611067683.png" alt="" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°å·²ç»è¾¾åˆ°æ¥é¢„æœŸçš„æ•ˆæœ,ä½†æ˜¯è¿˜æ˜¯å¯ä»¥å‘ç°çº¿æ¡ä¸Šå‡ºç°äº†é”¯é½¿,ä¸‹æœŸæ¥å®ç°ä¸€ä¸‹çº¿æ¡çš„åèµ°æ ·æ•ˆæœ.</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://zhuanlan.zhihu.com/p/473583272">ä½¿ç”¨ OpenGL å®ç°çº¿å‹åŠ¨ç”»çš„æ•™ç¨‹æ¥å•¦ï¼</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/59541559">åœ¨ WebGL ä¸­ç»˜åˆ¶ç›´çº¿</a></li>
<li><a href="https://crates.io/crates/egui">egui</a></li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ 2d å›¾å½¢åº“å¼€å‘]]></title>
        <id>https://gty215615.github.io/post/cong-ling-shi-xian-yi-ge-gui-xi-tong/</id>
        <link href="https://gty215615.github.io/post/cong-ling-shi-xian-yi-ge-gui-xi-tong/">
        </link>
        <updated>2022-08-27T00:59:41.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>ç”±äºæœ€è¿‘å­¦ä¹  WebGPU æ²¡æœ‰ç›®æ ‡, åŠ ä¸Šæœ€è¿‘å¯¹ 2d å›¾å½¢åº“çš„å®ç°æ¯”è¾ƒæ„Ÿå…´è¶£, æ‰€ä»¥æƒ³å®ç°ä¸€ä¸ªç©å…·2d å›¾å½¢ç³»ç»Ÿæ¥æ£€éªŒè‡ªå·±çš„å­¦ä¹ æˆæœ. å› æ­¤å°±æœ‰äº†è¿™ä¸ªé¡¹ç›®, å¼€äº†ä¸ªæ–°å‘, å¸Œæœ›èƒ½åšæŒä¸‹å» ğŸ¶</p>
</blockquote>
<h2 id="å®ç°æ€è·¯">å®ç°æ€è·¯</h2>
<p>ç›®å‰æ•´ä½“è®¾è®¡æ€è·¯å°±æ˜¯:</p>
<ol>
<li>å®ç° 2d å›¾å…ƒ çº¿(line) ã€çŸ©å½¢(rectangle) ã€åœ†(circle) ã€æ›²çº¿(curve), å¹¶å°† 2d å›¾å½¢æ‹†åˆ†æˆä¸åŒå¤§å°çš„ä¸‰è§’å½¢å›¾å…ƒ,</li>
<li>å°†è¿™äº›å›¾å…ƒä¼ é€’åˆ° WebGPU çš„æ¸²æŸ“ç®¡çº¿ä¸­å»ç»˜åˆ¶.<br>
<img src="https://gty215615.github.io/post-images/1661563240757.png" alt="" loading="lazy"></li>
</ol>
<h2 id="é¡¹ç›®æ­å»º">é¡¹ç›®æ­å»º</h2>
<p>æ•´ä½“æ€è·¯ç¡®å®šä¸‹æ¥ä¹‹å å°±æ˜¯è¿›è¡Œé¡¹ç›®å¼€å‘ , å‡†å¤‡ç”¨ rust å¼€å‘è¿™ä¸ª 2d å›¾å½¢åº“, çª—å£ä½¿ç”¨ winit åº“ , æ¸²æŸ“åç«¯ä½¿ç”¨ WebGPU çš„ rust å®ç° wgpu ,</p>
<p>ç”¨ cargo æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ rust é¡¹ç›® , æ–°å»ºå‡ ä¸ªå­é¡¹ç›® ,æ•´ç†é¡¹ç›®ç»“æ„å¦‚ä¸‹<br>
<img src="https://gty215615.github.io/post-images/1661598510154.png" alt="" loading="lazy"></p>
<p>å¯¹é¡¹ç›®è¿›è¡Œçš„åˆ†å±‚ , åŒ…æ‹¬ æ ¸å¿ƒå±‚(core)ã€å·¥å…·å±‚(function) ,<br>
1. core ä¸­åŒ…æ‹¬äº† æ•°å­¦åº“(math) ã€ é¢œè‰²(color)<br>
2. function ä¸­åŒ…æ‹¬äº†æ¸²æŸ“åç«¯(render)ã€çª—å£(window)ã€2d ç»˜åˆ¶æ¨¡å—(paint)</p>
<p>é¡¹ç›®æ„å»ºå®Œæ¯•,ä¸‹æœŸæ­£å¼å¼€å§‹å¼€å‘.</p>
]]></content>
    </entry>
</feed>